FROM python:alpine3.12

RUN apk add --no-cache libxml2-dev libxslt-dev gcc musl-dev libffi-dev ca-certificates

WORKDIR /refresher
COPY ./src/refresher/requirements.txt ./

RUN pip install -r requirements.txt

WORKDIR /
COPY ./docker/img/entrypoints/refresher-entrypoint.sh .

WORKDIR /refresher/
COPY ./src/refresher/src/ ./

ENTRYPOINT ["/refresher-entrypoint.sh"]